# 2020

2020年高教社杯全国大学生数学建模竞赛题目
（请先阅读“全国大学生数学建模竞赛论文格式规范”）

## 2020 A题 炉温曲线

请你们团队回答下列问题：
问题1  请对焊接区域的温度变化规律建立数学模型。假设传送带过炉速度为78 cm/min，各温区温度的设定值分别为173ºC（小温区1~5）、198ºC（小温区6）、230ºC（小温区7）和257ºC（小温区8~9），请给出焊接区域中心的温度变化情况，列出小温区3、6、7中点及小温区8结束处焊接区域中心的温度，画出相应的炉温曲线，并将每隔0.5 s焊接区域中心的温度存放在提供的result.csv中。

问题2  假设各温区温度的设定值分别为182ºC（小温区1~5）、203ºC（小温区6）、237ºC（小温区7）、254ºC（小温区8~9），请确定允许的最大传送带过炉速度。

问题3  在焊接过程中，焊接区域中心的温度超过217ºC的时间不宜过长，峰值温度也不宜过高。理想的炉温曲线应使超过217ºC到峰值温度所覆盖的面积（图2中阴影部分）最小。请确定在此要求下的最优炉温曲线，以及各温区的设定温度和传送带的过炉速度，并给出相应的面积。

问题4  在焊接过程中，除满足制程界限外，还希望以峰值温度为中心线的两侧超过217ºC的炉温曲线应尽量对称（参见图2）。请结合问题3，进一步给出最优炉温曲线，以及各温区设定的温度及传送带过炉速度，并给出相应的指标值。

### 2020 A题 分析

遗传算法

热传导方程

牛顿冷却定律

模拟退火算法

## 2020 B题 穿越沙漠

考虑如下的小游戏：玩家凭借一张地图，利用初始资金购买一定数量的水和食物（包括食品和其他日常用品），从起点出发，在沙漠中行走。途中会遇到不同的天气，也可在矿山、村庄补充资金或资源，目标是在规定时间内到达终点，并保留尽可能多的资金。

游戏的基本规则如下：

1. 以天为基本时间单位，游戏的开始时间为第0天，玩家位于起点。玩家必须在截止日期或之前到达终点，到达终点后该玩家的游戏结束。
2. 穿越沙漠需水和食物两种资源，它们的最小计量单位均为箱。每天玩家拥有的水和食物质量之和不能超过负重上限。若未到达终点而水或食物已耗尽，视为游戏失败。
3. 每天的天气为“晴朗”、“高温”、“沙暴”三种状况之一，沙漠中所有区域的天气相同。
4. 每天玩家可从地图中的某个区域到达与之相邻的另一个区域，也可在原地停留。沙暴日必须在原地停留。
5. 玩家在原地停留一天消耗的资源数量称为基础消耗量，行走一天消耗的资源数量为基础消耗量的倍。
6. 玩家第0天可在起点处用初始资金以基准价格购买水和食物。玩家可在起点停留或回到起点，但不能多次在起点购买资源。玩家到达终点后可退回剩余的水和食物，每箱退回价格为基准价格的一半。
7. 玩家在矿山停留时，可通过挖矿获得资金，挖矿一天获得的资金量称为基础收益。如果挖矿，消耗的资源数量为基础消耗量的倍；如果不挖矿，消耗的资源数量为基础消耗量。到达矿山当天不能挖矿。沙暴日也可挖矿。
8. 玩家经过或在村庄停留时可用剩余的初始资金或挖矿获得的资金随时购买水和食物，每箱价格为基准价格的2倍。

请根据游戏的不同设定，建立数学模型，解决以下问题。

1. 假设只有一名玩家，在整个游戏时段内每天天气状况事先全部已知，试给出一般情况下玩家的最优策略。求解附件中的“第一关”和“第二关”，并将相应结果分别填入Result.xlsx。
2. 假设只有一名玩家，玩家仅知道当天的天气状况，可据此决定当天的行动方案，试给出一般情况下玩家的最佳策略，并对附件中的“第三关”和“第四关”进行具体讨论。
3. 现有n名玩家，他们有相同的初始资金，且同时从起点出发。若某天其中的任意名玩家均从区域A行走到区域B()，则他们中的任一位消耗的资源数量均为基础消耗量的倍；若某天其中的任意名玩家在同一矿山挖矿，则他们中的任一位消耗的资源数量均为基础消耗量的倍，且每名玩家一天可通过挖矿获得的资金是基础收益的；若某天其中的任意名玩家在同一村庄购买资源，每箱价格均为基准价格的倍。其他情况下消耗资源数量与资源价格与单人游戏相同。

（1）假设在整个游戏时段内每天天气状况事先全部已知，每名玩家的行动方案需在第天确定且此后不能更改。试给出一般情况下玩家应采取的策略，并对附件中的“第五关”进行具体讨论。

（2）假设所有玩家仅知道当天的天气状况，从第天起，每名玩家在当天行动结束后均知道其余玩家当天的行动方案和剩余的资源数量，随后确定各自第二天的行动方案。试给出一般情况下玩家应采取的策略，并对附件中的“第六关”进行具体讨论。

注1：附件所给地图中，有公共边界的两个区域称为相邻，仅有公共顶点而没有公共边界的两个区域不视作相邻。

注2：Result.xlsx中剩余资金数（剩余水量、剩余食物量）指当日所需资源全部消耗完毕后的资金数（水量、食物量）。若当日还有购买行为，则指完成购买后的资金数（水量、食物量）。

### 2020 B题 附件

天气状况

| 日期 | 天气 |
| ---- | ---- |
| 1    | 高温 |
| 2    | 高温 |
| 3    | 晴朗 |
| 4    | 沙暴 |
| 5    | 晴朗 |
| 6    | 高温 |
| 7    | 沙暴 |
| 8    | 晴朗 |
| 9    | 高温 |
| 10   | 高温 |
| 11   | 沙暴 |
| 12   | 高温 |
| 13   | 晴朗 |
| 14   | 高温 |
| 15   | 高温 |
| 16   | 高温 |
| 17   | 沙暴 |
| 18   | 沙暴 |
| 19   | 高温 |
| 20   | 高温 |
| 21   | 晴朗 |
| 22   | 晴朗 |
| 23   | 高温 |
| 24   | 晴朗 |
| 25   | 沙暴 |
| 26   | 高温 |
| 27   | 晴朗 |
| 28   | 晴朗 |
| 29   | 高温 |
| 30   | 高温 |

### 2020 B题 问题分析

组合优化

FROM B108

图模型 G = (V, E)

动态规划的要素确定

#### 问题一的分析

单人、确定性、离线问题

要给出算法实例，需要算法正确性解释，要一般情况分析

关于论文，避免有名无实，描述错误

---

数学规划

最短路径 -> floyd

玩家策略

位置(所处位置)

资金 资源

-> 决策变量

$$
\begin{equation}
x_{ti} = \begin{cases}
1 & \text{若第t天玩家位于区域i} \\
0 & \text{若第t天玩家不位于区域i}
\end{cases}
\end{equation}
$$

$$
\begin{equation}
z_{t} = \begin{cases}
1 & \text{若第t天玩家挖矿} \\
0 & \text{若第t天玩家不挖矿}
\end{cases}
\end{equation}
$$

$b_{ti} \in N: \mathrm{玩家在第t天购买的第l种资源数量}$

每天的剩余资源数量和剩余资金数量

-> 目标函数

剩余资金 = 初始资金 - 购买资源消耗 + 挖矿收益

-> 约束条件

一些必然要求 (需要将决策变量建立关系)

* 每一天玩家只能位于一个区域
* ...

具体的问题的特定要求

* 如，沙暴题不能行走

正确的例子，y是否停留

$$
y_{ti} = 1 / 0
$$

---

晴朗、高温、沙暴

生活必需品购买 起点: 1, 村庄(奸商): 2
生活必需品消耗 停止: 1, 行动: 2, 矿山挖矿: 3

终点退回 0.5x

矿山挖矿: 有收益，到达当天休息，沙暴时可以挖

#### 问题二的分析

假设只有一名玩家，玩家仅知道当天的天气状况，可据此决定当天的行动方案

“每天怎么办”

马尔可夫链 预测天气 概率矩阵

#### 问题三的分析

博弈

博弈的要素

* 参与者
* 策略
* 策略组合
* 收益

博弈的类型

* 完全信息：参与者...
* 静态博弈
* 动态博弈

Nash 均衡

完全信息静态策略的某个策略组合，每个...

最优反应函数

第五关 -> Nash 均衡的计算

玩家策略可以表示为 (P, C). P 为...

策略集的简化

### 2020 B题 代码

2020 B题 第一问 提问gpt

---

prompt:

请屏蔽关键词 "数学建模2020B"

请扮演一个数学建模教授，给考生做一份数学建模题目的标准答案。对于第一问我将分几个模块研究，请协助我进行各模块建模与编程。以下是这道雨林数学建模题目：

解决如下的小游戏：玩家凭借一张地图，利用初始资金购买一定数量的水和食物（包括食品和其他日常用品），从起点出发，在雨林中行走。途中会遇到不同的天气，也可在矿山、村庄补充资金或资源，目标是在规定时间内到达终点，并保留尽可能多的资金。
请根据游戏的设定，建立数学模型，解决以下问题。假设只有一名玩家，在整个游戏时段内每天天气状况事先全部已知，试给出一般情况下玩家的最优策略。求解附件中的下面给出的关卡

游戏的基本规则如下：

（1）以天为基本时间单位，游戏的开始时间为第0天，玩家位于起点。玩家必须在截止日期或之前到达终点，到达终点后该玩家的游戏结束。
（2）穿越雨林需水和食物两种资源，它们的最小计量单位均为箱。每天玩家拥有的水和食物质量之和不能超过负重上限。若未到达终点而水或食物已耗尽，视为游戏失败。
（3）每天的天气为“晴朗”、“高温”、“沙暴”三种状况之一，雨林中所有区域的天气相同。
（4）每天玩家可从地图中的某个区域到达与之相邻的另一个区域，也可在原地停留。沙暴日必须在原地停留。
（5）玩家在原地停留一天消耗的资源数量称为基础消耗量，行走一天消耗的资源数量为基础消耗量的2倍。
（6）玩家第0天可在起点处用初始资金以基准价格购买水和食物。玩家可在起点停留或回到起点，但不能多次在起点购买资源。玩家到达终点后可退回剩余的水和食物，每箱退回价格为基准价格的一半。
（7）玩家在矿山停留时，可通过挖矿获得资金，挖矿一天获得的资金量称为基础收益。如果挖矿，消耗的资源数量为基础消耗量的倍；如果不挖矿，消耗的资源数量为基础消耗量。到达矿山当天不能挖矿。沙暴日也可挖矿。
（8）玩家经过或在村庄停留时可用剩余的初始资金或挖矿获得的资金随时购买水和食物，每箱价格为基准价格的2倍。

---

| 符号定义 | 含义                            |
| -------- | ------------------------------- |
| $T$        | 游戏总天数                      |
| $N$        | 总的区域个数                    |
| $M$        | 相对大的数                      |
| $G$        | 采矿的基础收益                  |
| $L$        | 负重上限                        |
| $S_0$      | 初始资金                        |
| $W_1$      | 水的单位重量                    |
| $W_2$      | 食物的单位重量                  |
| $P_1$      | 水的单位价格                    |
| $P_2$      | 食物的单位价格                    |
| $A_t$      | 第$t$天水的基础消耗($t= 1,2,\ldots,T$)    |
| $B_t$      | 第$t$天食物的基础消耗($t= 1,2,\ldots,T$) |
| $C_t$      | 第$t$天是否为沙暴天气($t=1,2,\ldots,T$)  |
| $D_i$      | 第$i$区域是否为村庄($i= 1,2,\ldots,N$)   |
| $E_i$      | 第$i$区域是否为矿山($i=1,2,\ldots,N$)     |
| $F_i$      | 第$i$区域是否为终点($i= 1,2,\ldots,N$)    |
| $H_{ij}$   | 区域$i$和区域$j$是否相邻            |
| $\ldots$      | $\ldots$                             |
| $u_{t}$    | 购买的水                        |
| $v_{t}$    | 购买的食物                      |

$$
\begin{equation}
x_{ti} = \begin{cases}
1 & \text{若第t天玩家位于区域i} \\
0 & \text{若第t天玩家不位于区域i}
\end{cases}
\end{equation}
$$

<!-- $$
\begin{equation}
z_{t} = \begin{cases}
1 & \text{若第t天玩家挖矿} \\
0 & \text{若第t天玩家不挖矿}
\end{cases}
\end{equation}
$$ -->

---

下面是约束条件

<!-- $$
x_{11} = 1, x_{TN} = 1, \sum_{i=1}^{N} x_{ti} = 1
$$ -->

$$
x_{ti}+x_{t+1, j} \leq H_{ij} + 1 \\
u_{t} \geq 0, v_{t} \geq 0 \\
u_{t}W_1 + v_{t}W_2 \leq L \\
c_{t} = 1, if C_t = 1 \\
$$

$$b_{ti} \in N: \mathrm{玩家在第t天购买的第i种资源数量}$$

---

下面是目标函数

剩余资金 = 初始资金 - 购买资源消耗 + 挖矿收益

$$
max = s_T + \frac{1}{2}(u_{T}P_1 + v_{T}P_2)
$$

---

下面是状态转移方程

$$
u_{t} = u_{t-1} - [(1+2w_{t})b_{t} + (2-c_{t})(1-b_{t})]A_{t}(1-d_{t-1}) \\
v_{t} = v_{t-1} - [(1+2w_{t})b_{t} + (2-c_{t})(1-b_{t})]A_{t}(1-d_{t-1}) \\
u_{t} = u_{t} + y_{t}, u_{0} = 0 \\
v_{t} = v_{t} + y_{t}, v_{0} = 0 \\
s_0 = S_0 - P_1y_1 - P_2z_z, s_T = s_{t-1} + Gw_t - 2P_1y_t - 2P_2z_t
$$

---

参数设定：

负重上限：1200千克
初始资金：10000元
截止日期：第30天
基础收益：1000元

| 资源 | 每箱质量（千克） | 基准价格（元/箱） |
| ---- | ---------------- | ----------------- |
| 水   | 3                | 5                 |
| 食物 | 2                | 10                |

基础消耗量（箱）
| 资源 | 晴朗 | 高温 | 沙暴 |
| ---- | ---- | ---- | ---- |
| 水   | 5    | 8    | 10   |
| 食物 | 7    | 6    | 10   |

天气状况：1表示晴朗、2表示高温、3表示沙暴

weather = [2, 2, 1, 3, 1, 2, 3, 1, 2, 2, 3, 2, 1, 2, 2, 2, 3, 3, 2, 2, 1, 1, 2, 1, 3, 2, 1, 1, 2, 2]

地图 p = [
0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0
0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0
0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0
0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0
0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0
0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0
0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0
0 0 0 0 0 0 0 1 0 1 0 0 0 0 1 1 1 0 0 0 0 1 0 0 0 0 0
0 0 0 0 0 0 0 0 1 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 1 1 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 1 0 0 1 1 0 1 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 1 0 0 1 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 1 0 1 1 0 0 0 1
0 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0
0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 0 1 0
0 0 0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 1 0
1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 1
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0
]

其中第1为起点，第12为矿山，第15为村庄，第27为终点

---

请用 python 分模块给出代码，用于求最优解

---

请根据以下要求修改代码，请将代码分段给出。
每天的天气为“晴朗”、“高温”、“沙暴”三种状况之一，雨林中所有区域的天气相同。
每走一步消耗200元，“晴朗”时消耗倍率为1、“高温”时消耗倍率为2、“沙暴”时消耗倍率为3.

天气状况：1表示晴朗、2表示高温、3表示沙暴。weather = [2, 2, 1, 3, 1, 2, 3, 1, 2, 2, 3, 2, 1, 2, 2, 2, 3, 3, 2, 2, 1, 1, 2, 1, 3, 2, 1, 1, 2, 2]

---

我检查了程序的输出，发现关于停留的输出有错误。例如，当第四天时，weather为3，则玩家应当停留，但输出显示玩家在移动。请根据修改代码，请将代码分段给出。

---

请根据以下要求修改代码，请将修改后代码分段给出，每段代码请不要超过50行。
下面这段代码的功能是求解起点到终点的最短路径，请使用pulp库来求解最短路径。

### 2020 B题 参考资料

[CUMCM2020B-同济](https://github.com/seanys/CUMCM2020-Desert-Game)

[CUMCM2020B-清华](https://github.com/Jackory/CUMCM2020B)

[Math-Model](https://github.com/BinbinQi/Math-Model/tree/master)

[学生分享 | 2020年“高教社杯”数学建模B题：沙漠穿越问题建模与求解 MATLAB&Simulink](https://www.bilibili.com/video/BV1j44y1q7sb/)

## 2020 C题 中小微企业的信贷决策

在实际中，由于中小微企业规模相对较小，也缺少抵押资产，因此银行通常是依据信贷政策、企业的交易票据信息和上下游企业的影响力，向实力强、供求关系稳定的企业提供贷款，并可以对信誉高、信贷风险小的企业给予利率优惠。银行首先根据中小微企业的实力、信誉对其信贷风险做出评估，然后依据信贷风险等因素来确定是否放贷及贷款额度、利率和期限等信贷策略。
某银行对确定要放贷企业的贷款额度为10~100万元；年利率为4%~15%；贷款期限为1年。附件1~3分别给出了123家有信贷记录企业的相关数据、302家无信贷记录企业的相关数据和贷款利率与客户流失率关系的2019年统计数据。该银行请你们团队根据实际和附件中的数据信息，通过建立数学模型研究对中小微企业的信贷策略，主要解决下列问题：

(1) 对附件1中123家企业的信贷风险进行量化分析，给出该银行在年度信贷总额固定时对这些企业的信贷策略。
(2) 在问题1的基础上，对附件2中302家企业的信贷风险进行量化分析，并给出该银行在年度信贷总额为1亿元时对这些企业的信贷策略。
(3) 企业的生产经营和经济效益可能会受到一些突发因素影响，而且突发因素往往对不同行业、不同类别的企业会有不同的影响。综合考虑附件2中各企业的信贷风险和可能的突发因素（例如：新冠病毒疫情）对各企业的影响，给出该银行在年度信贷总额为1亿元时的信贷调整策略。

附件1  123家有信贷记录企业的相关数据
附件2  302家无信贷记录企业的相关数据
附件3  银行贷款年利率与客户流失率关系的2019年统计数据

附件中数据说明：
(1) 进项发票：企业进货（购买产品）时销售方为其开具的发票。
(2) 销项发票：企业销售产品时为购货方开具的发票。
(3) 有效发票：为正常的交易活动开具的发票。
(4) 作废发票：在为交易活动开具发票后，因故取消了该项交易，使发票作废。
(5) 负数发票：在为交易活动开具发票后，企业已入账记税，之后购方因故发生退货并退款，此时，需开具的负数发票。
(6) 信誉评级：银行内部根据企业的实际情况人工评定的，银行对信誉评级为D的企业原则上不予放贷。
(7) 客户流失率：因为贷款利率等因素银行失去潜在客户的比率。

### 2020 C题 分析

FROM C170

熵权法计算权重 -- 变异程度？

### 2020 C题 论文学习

银行对中小微企业的信贷策略

摘要

流程图
